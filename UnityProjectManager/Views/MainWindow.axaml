<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:UnityProjectManager.ViewModels"
        xmlns:views="using:UnityProjectManager.Views"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="using:UnityProjectManager.Converters"
        xmlns:ui="using:FluentAvalonia.UI.Controls"
        mc:Ignorable="d" d:DesignWidth="1100" d:DesignHeight="700"
        x:Class="UnityProjectManager.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Unity Project Manager"
        TransparencyLevelHint="Mica"
        Background="Transparent"
        ExtendClientAreaToDecorationsHint="True">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Resources>
        <conv:PathToBitmapConverter x:Key="PathToBitmapConverter"/>
        <conv:StringEqualsConverter x:Key="StringEqualsConverter"/>
        
        <SolidColorBrush x:Key="MetaBg" Color="#0F0F0F"/>
        <SolidColorBrush x:Key="MetaSidebarBg" Color="#121212"/>
        <SolidColorBrush x:Key="MetaHighlight" Color="#2A2A2A"/>
        <SolidColorBrush x:Key="MetaHeader" Color="#F5F5F5"/>
        <SolidColorBrush x:Key="MetaSubtext" Color="#888888"/>
        <SolidColorBrush x:Key="MetaAccent" Color="#007ACC"/>
    </Window.Resources>

    <Window.Styles>
        <Style Selector="Button.side">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                    <BrushTransition Property="Foreground" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.side:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#222222"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="Button.side.selected /template/ ContentPresenter">
            <Setter Property="Background" Value="{StaticResource MetaHighlight}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="Button.side TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style Selector="Button.side ui|SymbolIcon">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Margin" Value="0,0,12,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style Selector="TextBlock.h1">
             <Setter Property="FontSize" Value="24"/>
             <Setter Property="FontWeight" Value="Bold"/>
             <Setter Property="Foreground" Value="{StaticResource MetaHeader}"/>
             <Setter Property="Margin" Value="40,40,0,20"/>
        </Style>
    </Window.Styles>

    <Grid Background="{StaticResource MetaBg}">
       <!-- Main Layout -->
       <SplitView IsPaneOpen="True"
                  DisplayMode="Inline"
                  OpenPaneLength="250"
                  PaneBackground="{StaticResource MetaSidebarBg}"
                  Background="Transparent">
           
           <SplitView.Pane>
               <Border Padding="15,40,15,15">
                   <StackPanel Spacing="25">
                       <StackPanel Spacing="5">
                           <TextBlock Text="MANAGEMENT" FontWeight="Bold" Foreground="{StaticResource MetaSubtext}" Margin="8,0,0,8" FontSize="10" LetterSpacing="1"/>
                           
                           <Button Classes="side" Command="{Binding SelectTabCommand}" CommandParameter="Projects"
                                   Classes.selected="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Projects'}">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Home"/>
                                   <TextBlock Text="Projects"/>
                               </StackPanel>
                           </Button>
                           
                           <Button Classes="side" Command="{Binding SelectTabCommand}" CommandParameter="Installs"
                                   Classes.selected="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Installs'}">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="List"/>
                                   <TextBlock Text="Installs"/>
                               </StackPanel>
                           </Button>

                           <Button Classes="side" Command="{Binding SelectTabCommand}" CommandParameter="Learn"
                                   Classes.selected="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Learn'}">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Library"/>
                                   <TextBlock Text="Learn"/>
                               </StackPanel>
                           </Button>

                           <Button Classes="side" Command="{Binding SelectTabCommand}" CommandParameter="Inspiration"
                                   Classes.selected="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Inspiration'}">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Globe"/>
                                   <TextBlock Text="Made with Unity"/>
                               </StackPanel>
                           </Button>

                           <Button Classes="side" Command="{Binding SelectTabCommand}" CommandParameter="Planner"
                                   Classes.selected="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Planner'}">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Calendar"/>
                                   <TextBlock Text="Planner"/>
                               </StackPanel>
                           </Button>

                           <Button Classes="side" Command="{Binding SelectTabCommand}" CommandParameter="Docs"
                                   Classes.selected="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Docs'}">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Document"/>
                                   <TextBlock Text="Docs"/>
                               </StackPanel>
                           </Button>
                       </StackPanel>
                       
                       <StackPanel Spacing="8">
                           <TextBlock Text="WATCH FOLDERS" FontWeight="Bold" Foreground="{StaticResource MetaSubtext}" Margin="8,0,0,8" FontSize="10" LetterSpacing="1"/>
                           <Button x:Name="AddFolderButton" Classes="side">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Add"/>
                                   <TextBlock Text="Add Folder"/>
                               </StackPanel>
                           </Button>
                       </StackPanel>
                       
                       <StackPanel Spacing="8" VerticalAlignment="Bottom">
                           <TextBlock Text="TOOLS" FontWeight="Bold" Foreground="{StaticResource MetaSubtext}" Margin="8,0,0,8" FontSize="10" LetterSpacing="1"/>
                           <Button Command="{Binding SyncWithHubCommand}" Classes="side">
                               <StackPanel Orientation="Horizontal">
                                   <ui:SymbolIcon Symbol="Sync"/>
                                   <TextBlock Text="Sync Hub"/>
                               </StackPanel>
                           </Button>
                       </StackPanel>
                   </StackPanel>
               </Border>
           </SplitView.Pane>

           <SplitView.Content>
                <Grid>
                     <!-- Page: Projects -->
                     <Grid RowDefinitions="Auto,*" IsVisible="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Projects'}">
                          <TextBlock Text="All Projects" Classes="h1" />
                          <ScrollViewer Grid.Row="1" Padding="40,0,40,40">
                               <ItemsControl ItemsSource="{Binding Projects}">
                                   <ItemsControl.ItemsPanel>
                                       <ItemsPanelTemplate>
                                           <WrapPanel />
                                       </ItemsPanelTemplate>
                                   </ItemsControl.ItemsPanel>
                                   <ItemsControl.ItemTemplate>
                                       <DataTemplate>
                                           <views:ProjectCardView />
                                       </DataTemplate>
                                   </ItemsControl.ItemTemplate>
                               </ItemsControl>
                          </ScrollViewer>
                     </Grid>

                     <!-- Page: Installs -->
                     <Grid RowDefinitions="Auto,Auto,*" IsVisible="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Installs'}">
                          <TextBlock Text="Unity Installations" Classes="h1" />
                          <Button x:Name="AddEditorPathButton" Grid.Row="1" Margin="40,0,40,20" HorizontalAlignment="Right" Background="#2A2A2A" Padding="15,8" CornerRadius="6">
                              <StackPanel Orientation="Horizontal" Spacing="8">
                                  <ui:SymbolIcon Symbol="Add" FontSize="16"/>
                                  <TextBlock Text="Locate Editors" FontWeight="SemiBold"/>
                              </StackPanel>
                          </Button>
                          <ScrollViewer Grid.Row="2" Padding="40,0,40,40">
                               <ItemsControl ItemsSource="{Binding InstalledEditors}">
                                   <ItemsControl.ItemTemplate>
                                       <DataTemplate>
                                           <Border Background="#1C1C1C" Margin="0,0,0,10" Padding="20" CornerRadius="10" BorderBrush="#252525" BorderThickness="1">
                                               <Grid ColumnDefinitions="*,Auto">
                                                   <StackPanel Spacing="4">
                                                       <TextBlock Text="{Binding}" FontSize="16" FontWeight="SemiBold" Foreground="White" />
                                                       <TextBlock Text="Detected in Unity Hub" FontSize="12" Foreground="{StaticResource MetaSubtext}" />
                                                   </StackPanel>
                                                   <Button Grid.Column="1" Content="Locate" Background="#2A2A2A" Padding="15,6" CornerRadius="4"/>
                                               </Grid>
                                           </Border>
                                       </DataTemplate>
                                   </ItemsControl.ItemTemplate>
                               </ItemsControl>
                          </ScrollViewer>
                     </Grid>

                      <!-- Page: Learn -->
                      <Grid RowDefinitions="Auto,Auto,*" IsVisible="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Learn'}">
                          <TextBlock Text="Unity Learn" Classes="h1" Margin="40,40,0,10"/>
                          
                          <!-- Search Bar -->
                          <Border Grid.Row="1" Margin="40,10,40,20" Background="#1C1C1C" CornerRadius="10" BorderBrush="#252525" BorderThickness="1">
                              <Grid ColumnDefinitions="*,Auto">
                                  <TextBox Text="{Binding LearnSearchQuery}" Watermark="Search tutorials, courses, and pathways..." 
                                           Background="Transparent" BorderThickness="0" Margin="10,5" VerticalContentAlignment="Center">
                                      <TextBox.KeyBindings>
                                          <KeyBinding Gesture="Enter" Command="{Binding SearchLearnContentCommand}" />
                                      </TextBox.KeyBindings>
                                  </TextBox>
                                  <Button Grid.Column="1" Command="{Binding SearchLearnContentCommand}" Background="Transparent" Padding="15,5">
                                      <TextBlock Text="Search" Foreground="{StaticResource MetaAccent}" FontWeight="SemiBold"/>
                                  </Button>
                              </Grid>
                          </Border>

                          <ScrollViewer Grid.Row="2" Padding="40,0,40,40">
                              <StackPanel>
                                  <ProgressBar IsIndeterminate="True" IsVisible="{Binding IsLoadingLearn}" Height="2" Margin="0,0,0,15" Foreground="{StaticResource MetaAccent}"/>
                                  
                                  <ItemsControl ItemsSource="{Binding LearnContents}">
                                      <ItemsControl.ItemsPanel>
                                          <ItemsPanelTemplate>
                                              <WrapPanel />
                                          </ItemsPanelTemplate>
                                      </ItemsControl.ItemsPanel>
                                      <ItemsControl.ItemTemplate>
                                          <DataTemplate>
                                              <Button Background="Transparent" Padding="0" Margin="0,0,20,20" 
                                                      Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).OpenLearnUrlCommand}"
                                                      CommandParameter="{Binding Url}">
                                                  <Border Width="280" Background="#1C1C1C" CornerRadius="12" ClipToBounds="True" BorderBrush="#252525" BorderThickness="1">
                                                      <StackPanel>
                                                          <!-- Thumbnail -->
                                                          <Panel Height="150" Background="#0F0F0F">
                                                              <Image Source="{Binding ThumbnailUrl, Converter={StaticResource PathToBitmapConverter}}" 
                                                                     Stretch="UniformToFill"/>
                                                              <!-- Badge -->
                                                              <Border HorizontalAlignment="Right" VerticalAlignment="Top" 
                                                                      Background="#CC000000" CornerRadius="0,0,0,8" Padding="8,4">
                                                                  <TextBlock Text="{Binding Type}" FontSize="10" Foreground="White" FontWeight="Bold"/>
                                                              </Border>
                                                          </Panel>
                                                          
                                                           <Border Padding="15">
                                                               <StackPanel Spacing="8">
                                                                   <TextBlock Text="{Binding Title}" FontSize="16" FontWeight="Bold" TextWrapping="Wrap" Height="44" MaxLines="2" Foreground="White"/>
                                                                   <TextBlock Text="{Binding Description}" FontSize="12" Foreground="{StaticResource MetaSubtext}" TextWrapping="Wrap" Height="50" MaxLines="3" TextTrimming="CharacterEllipsis"/>
                                                                   
                                                                   <Grid ColumnDefinitions="*,Auto">
                                                                       <StackPanel Orientation="Horizontal" Spacing="10">
                                                                           <TextBlock Text="{Binding Duration, StringFormat={}{0}m}" FontSize="11" Foreground="#AAAAAA"/>
                                                                           <TextBlock Text="•" Foreground="#444444"/>
                                                                           <TextBlock Text="{Binding SkillLevel}" FontSize="11" Foreground="#AAAAAA" />
                                                                       </StackPanel>
                                                                       <TextBlock Grid.Column="1" Text="→" Foreground="{StaticResource MetaAccent}" FontWeight="Bold"/>
                                                                   </Grid>
                                                               </StackPanel>
                                                           </Border>
                                                      </StackPanel>
                                                  </Border>
                                              </Button>
                                          </DataTemplate>
                                      </ItemsControl.ItemTemplate>
                                  </ItemsControl>
                              </StackPanel>
                          </ScrollViewer>
                      </Grid>

                      <!-- Page: Inspiration -->
                      <Grid RowDefinitions="Auto,*" IsVisible="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Inspiration'}">
                          <TextBlock Text="Made with Unity" Classes="h1" />
                          <ScrollViewer Grid.Row="1" Padding="40,0,40,40">
                              <StackPanel>
                                   <ProgressBar IsIndeterminate="True" IsVisible="{Binding IsLoadingInspiration}" Height="2" Margin="0,0,0,15" Foreground="{StaticResource MetaAccent}"/>
                                   
                                   <ItemsControl ItemsSource="{Binding InspirationItems}">
                                       <ItemsControl.ItemsPanel>
                                           <ItemsPanelTemplate>
                                               <WrapPanel />
                                           </ItemsPanelTemplate>
                                       </ItemsControl.ItemsPanel>
                                       <ItemsControl.ItemTemplate>
                                           <DataTemplate>
                                                <!-- Pinterest Card -->
                                               <Border  Width="260" Background="#1C1C1C" CornerRadius="12" Margin="0,0,20,20" ClipToBounds="True" BorderBrush="#252525" BorderThickness="1">
                                                    <StackPanel>
                                                        <!-- Image -->
                                                        <Panel Height="300" Background="#0F0F0F">
                                                             <Image Source="{Binding ImageUrl, Converter={StaticResource PathToBitmapConverter}}" Stretch="UniformToFill"/>
                                                             <!-- Gradient Overlay -->
                                                             <Border VerticalAlignment="Bottom" Height="80">
                                                                 <Border.Background>
                                                                     <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                                         <GradientStop Color="#00000000" Offset="0"/>
                                                                         <GradientStop Color="#CC000000" Offset="1"/>
                                                                     </LinearGradientBrush>
                                                                 </Border.Background>
                                                             </Border>
                                                             <StackPanel VerticalAlignment="Bottom" Margin="15" Spacing="4">
                                                                 <TextBlock Text="{Binding Title}" FontWeight="Bold" Foreground="White" TextTrimming="CharacterEllipsis"/>
                                                                 <TextBlock Text="{Binding Author}" FontSize="11" Foreground="#CCCCCC" TextTrimming="CharacterEllipsis"/>
                                                             </StackPanel>
                                                        </Panel>
                                                        
                                                        <!-- Meta -->
                                                        <Grid ColumnDefinitions="*,Auto" Margin="15,12">
                                                            <StackPanel Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
                                                                 <Border Background="#2A2A2A" CornerRadius="4" Padding="6,2">
                                                                     <TextBlock Text="{Binding Source}" FontSize="10" Foreground="#AAAAAA"/>
                                                                 </Border>
                                                            </StackPanel>
                                                            
                                                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="4" VerticalAlignment="Center">
                                                                <ui:SymbolIcon Symbol="Heart" FontSize="14" Foreground="#FF4444"/>
                                                                <TextBlock Text="{Binding Likes}" FontSize="12" Foreground="#DDDDDD"/>
                                                            </StackPanel>
                                                        </Grid>
                                                    </StackPanel>
                                               </Border>
                                           </DataTemplate>
                                       </ItemsControl.ItemTemplate>
                                   </ItemsControl>
                              </StackPanel>
                          </ScrollViewer>
                      </Grid>

                      <!-- Page: Docs -->
                      <Grid IsVisible="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Docs'}">
                          <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="20">
                              <Border Background="#1C1C1C" Padding="40" CornerRadius="20" BorderBrush="#252525" BorderThickness="1">
                                  <StackPanel Spacing="15" MaxWidth="400">
                                      <TextBlock Text="Unity Documentation" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Foreground="White"/>
                                      <TextBlock Text="Access the full Unity Manual and Scripting API. We'll open this in your default browser for the best experience." 
                                                 TextWrapping="Wrap" TextAlignment="Center" Foreground="{StaticResource MetaSubtext}"/>
                                      
                                      <Button Content="Open Unity Manual" 
                                              Command="{Binding OpenLearnUrlCommand}" 
                                              CommandParameter="https://docs.unity3d.com/Manual/index.html"
                                              HorizontalAlignment="Center" Padding="30,12" 
                                              Background="{StaticResource MetaAccent}" Foreground="White" FontWeight="Bold" CornerRadius="6"/>
                                      
                                      <Separator Margin="0,10" Background="#252525"/>
                                      
                                      <TextBlock Text="Quick Links" FontWeight="Bold" Margin="0,10,0,5" Foreground="White"/>
                                      <StackPanel Spacing="5">
                                          <Button Content="Scripting API Reference" Command="{Binding OpenLearnUrlCommand}" CommandParameter="https://docs.unity3d.com/ScriptReference/index.html" Background="Transparent" Foreground="{StaticResource MetaAccent}"/>
                                          <Button Content="Unity Learn" Command="{Binding OpenLearnUrlCommand}" CommandParameter="https://learn.unity.com" Background="Transparent" Foreground="{StaticResource MetaAccent}"/>
                                      </StackPanel>
                                  </StackPanel>
                              </Border>
                          </StackPanel>
                      </Grid>

                      <!-- Page: Planner -->
                      <Grid IsVisible="{Binding SelectedTab, Converter={StaticResource StringEqualsConverter}, ConverterParameter='Planner'}" RowDefinitions="Auto,*">
                          <!-- Board Header -->
                          <Border Background="#121212" Padding="25,15" BorderBrush="#252525" BorderThickness="0,0,0,1">
                              <Grid ColumnDefinitions="*,Auto">
                                  <StackPanel Orientation="Horizontal" Spacing="20">
                                      <TextBlock Text="Project Planner" FontSize="20" FontWeight="Bold" VerticalAlignment="Center" Foreground="White"/>
                                      <ComboBox ItemsSource="{Binding Boards}" SelectedItem="{Binding SelectedBoard}" Width="200" Background="#1C1C1C" BorderBrush="#252525">
                                          <ComboBox.ItemTemplate>
                                              <DataTemplate>
                                                  <TextBlock Text="{Binding Name}"/>
                                              </DataTemplate>
                                          </ComboBox.ItemTemplate>
                                      </ComboBox>
                                      <Button Content="+" Command="{Binding AddBoardCommand}" CommandParameter="New Board" Width="40" Background="#1C1C1C"/>
                                  </StackPanel>
                                  <Button Grid.Column="1" Content="Delete Board" Command="{Binding DeleteBoardCommand}" 
                                          CommandParameter="{Binding SelectedBoard}" Foreground="#FF4444" Background="Transparent"/>
                              </Grid>
                          </Border>

                          <!-- Kanban Board -->
                          <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                              <Grid ColumnDefinitions="360,360,360" Margin="25">
                                  <!-- Todo Column -->
                                  <Border Grid.Column="0" Background="#161616" CornerRadius="12" Margin="0,0,20,0" Padding="15">
                                      <Grid RowDefinitions="Auto,*,Auto">
                                          <TextBlock Text="TO DO" FontWeight="Bold" Foreground="{StaticResource MetaSubtext}" Margin="8,0,0,15" FontSize="11" LetterSpacing="1"/>
                                          <ListBox Grid.Row="1" ItemsSource="{Binding TodoTasks}" Background="Transparent" BorderThickness="0">
                                              <ListBox.ItemTemplate>
                                                  <DataTemplate>
                                                      <Border Background="#222222" CornerRadius="8" Padding="12" Margin="0,0,0,12" BorderBrush="#2D2D2D" BorderThickness="1">
                                                          <StackPanel Spacing="8">
                                                              <Border Height="4" Width="40" Background="{Binding Color}" HorizontalAlignment="Left" CornerRadius="2"/>
                                                              <TextBlock Text="{Binding Title}" FontWeight="SemiBold" TextWrapping="Wrap" Foreground="White" FontSize="14"/>
                                                              <TextBlock Text="{Binding Description}" FontSize="12" Foreground="{StaticResource MetaSubtext}" MaxLines="2" TextWrapping="Wrap"/>
                                                              <Grid ColumnDefinitions="*,Auto" Margin="0,5,0,0">
                                                                  <Button Content="Start" Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).MoveTaskCommand}" CommandParameter="{Binding}" 
                                                                          Padding="12,4" FontSize="12" Background="{StaticResource MetaAccent}" Foreground="White" CornerRadius="4"/>
                                                                  <Button Grid.Column="1" Content="✕" Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).DeleteTaskCommand}" CommandParameter="{Binding}" Background="Transparent" Foreground="#666666"/>
                                                              </Grid>
                                                          </StackPanel>
                                                      </Border>
                                                  </DataTemplate>
                                              </ListBox.ItemTemplate>
                                          </ListBox>
                                          <TextBox Grid.Row="2" Watermark="Add task..." Name="TodoInput" KeyDown="TodoInput_KeyDown" 
                                                   Background="#1C1C1C" BorderBrush="#252525" CornerRadius="6" Margin="0,10,0,0"/>
                                      </Grid>
                                  </Border>

                                  <!-- Doing Column -->
                                  <Border Grid.Column="1" Background="#161616" CornerRadius="12" Margin="0,0,20,0" Padding="15">
                                      <Grid RowDefinitions="Auto,*,Auto">
                                          <TextBlock Text="DOING" FontWeight="Bold" Foreground="{StaticResource MetaSubtext}" Margin="8,0,0,15" FontSize="11" LetterSpacing="1"/>
                                          <ListBox Grid.Row="1" ItemsSource="{Binding DoingTasks}" Background="Transparent" BorderThickness="0">
                                              <ListBox.ItemTemplate>
                                                  <DataTemplate>
                                                      <Border Background="#222222" CornerRadius="8" Padding="12" Margin="0,0,0,12" BorderBrush="#2D2D2D" BorderThickness="1">
                                                          <StackPanel Spacing="8">
                                                              <Border Height="4" Width="40" Background="{Binding Color}" HorizontalAlignment="Left" CornerRadius="2"/>
                                                              <TextBlock Text="{Binding Title}" FontWeight="SemiBold" TextWrapping="Wrap" Foreground="White" FontSize="14"/>
                                                              <Grid ColumnDefinitions="*,Auto" Margin="0,5,0,0">
                                                                  <Button Content="Done" Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).MoveTaskCommand}" CommandParameter="{Binding}" 
                                                                          Padding="12,4" FontSize="12" Background="{StaticResource MetaAccent}" Foreground="White" CornerRadius="4"/>
                                                                  <Button Grid.Column="1" Content="✕" Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).DeleteTaskCommand}" CommandParameter="{Binding}" Background="Transparent" Foreground="#666666"/>
                                                              </Grid>
                                                          </StackPanel>
                                                      </Border>
                                                  </DataTemplate>
                                              </ListBox.ItemTemplate>
                                          </ListBox>
                                      </Grid>
                                  </Border>

                                  <!-- Done Column -->
                                  <Border Grid.Column="2" Background="#161616" CornerRadius="12" Padding="15">
                                      <Grid RowDefinitions="Auto,*,Auto">
                                          <TextBlock Text="DONE" FontWeight="Bold" Foreground="{StaticResource MetaSubtext}" Margin="8,0,0,15" FontSize="11" LetterSpacing="1"/>
                                          <ListBox Grid.Row="1" ItemsSource="{Binding DoneTasks}" Background="Transparent" BorderThickness="0">
                                              <ListBox.ItemTemplate>
                                                  <DataTemplate>
                                                      <Border Background="#1C1C1C" CornerRadius="8" Padding="12" Margin="0,0,0,12" Opacity="0.6">
                                                          <StackPanel Spacing="8">
                                                              <TextBlock Text="{Binding Title}" FontWeight="SemiBold" TextDecorations="Strikethrough" Foreground="#888888" FontSize="14"/>
                                                              <Grid ColumnDefinitions="*,Auto">
                                                                  <Button Content="Reset" Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).MoveTaskCommand}" CommandParameter="{Binding}" 
                                                                          Padding="12,4" FontSize="12" Background="#333333" Foreground="White" CornerRadius="4"/>
                                                                  <Button Grid.Column="1" Content="✕" Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).DeleteTaskCommand}" CommandParameter="{Binding}" Background="Transparent" Foreground="#666666"/>
                                                              </Grid>
                                                          </StackPanel>
                                                      </Border>
                                                  </DataTemplate>
                                              </ListBox.ItemTemplate>
                                          </ListBox>
                                      </Grid>
                                  </Border>
                              </Grid>
                          </ScrollViewer>
                      </Grid>
                </Grid>
           </SplitView.Content>
       </SplitView>
       
       <!-- Details Overlay -->
       <Grid IsVisible="{Binding IsDetailsOpen}" Background="#CC000000">
           <!-- Click background to close -->
           <Button Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                   Command="{Binding CloseProjectDetailsCommand}" />
           
           <!-- Content Modal -->
           <Border Background="#1C1C1C" Width="950" Height="550" CornerRadius="16" BoxShadow="0 20 50 0 #000000" BorderBrush="#252525" BorderThickness="1">
               <Grid ColumnDefinitions="320,*" RowDefinitions="Auto,*">
                   
                   <!-- Left Sidebar: Project Info -->
                   <Border Grid.RowSpan="2" Background="#121212" CornerRadius="16,0,0,16" Padding="30">
                       <StackPanel Spacing="20">
                           <!-- Large Thumbnail -->
                           <Border CornerRadius="12" ClipToBounds="True" Height="180">
                               <Image Source="{Binding SelectedProject.ThumbnailPath, Converter={StaticResource PathToBitmapConverter}}" 
                                      Stretch="UniformToFill"/>
                           </Border>
                           
                           <TextBlock Text="{Binding SelectedProject.Name}" FontSize="28" FontWeight="Bold" Foreground="White" TextWrapping="Wrap"/>
                           
                           <StackPanel Spacing="6">
                               <TextBlock Text="UNITY VERSION" FontWeight="Bold" FontSize="10" Foreground="{StaticResource MetaSubtext}" LetterSpacing="1"/>
                               <TextBlock Text="{Binding SelectedProject.UnityVersion}" FontSize="16" Foreground="White"/>
                           </StackPanel>
                           
                           <StackPanel Spacing="6">
                               <TextBlock Text="LOCATION" FontWeight="Bold" FontSize="10" Foreground="{StaticResource MetaSubtext}" LetterSpacing="1"/>
                               <TextBlock Text="{Binding SelectedProject.Path}" FontSize="13" Foreground="#AAAAAA" TextWrapping="Wrap"/>
                           </StackPanel>

                           <Rectangle Height="1" Fill="#252525" Margin="0,15"/>

                           <Button Content="Open in Editor" Command="{Binding OpenProjectCommand}" 
                                   HorizontalAlignment="Stretch" Padding="0,15" Background="{StaticResource MetaAccent}" 
                                   Foreground="White" FontWeight="Bold" CornerRadius="8"/>
                           
                           <Grid ColumnDefinitions="*,Auto" Margin="0,10,0,0">
                               <Button Content="Clean Library" Command="{Binding CleanLibraryCommand}" 
                                       HorizontalAlignment="Stretch" Margin="0,0,10,0" Padding="0,12" Background="#2A2A2A" CornerRadius="8"/>
                               <Button Grid.Column="1" Content="..." Width="45" Height="45" Background="#2A2A2A" CornerRadius="8"/>
                           </Grid>

                           <Button Content="Close" Command="{Binding CloseProjectDetailsCommand}" 
                                   HorizontalAlignment="Stretch" Margin="0,15,0,0" Background="Transparent" 
                                   BorderBrush="#2A2A2A" BorderThickness="1" CornerRadius="8"/>
                       </StackPanel>
                   </Border>
                   
                   <!-- Right Content: Packages -->
                   <Border Grid.Column="1" Grid.Row="0" Padding="40,30" BorderBrush="#252525" BorderThickness="0,0,0,1">
                       <Grid ColumnDefinitions="*,Auto">
                           <TextBlock Text="Installed Packages" FontSize="22" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                           <Button Grid.Column="1" Content="Add Package" Background="#2A2A2A" Padding="20,10" CornerRadius="6"/>
                       </Grid>
                   </Border>
                   
                   <ListBox Grid.Column="1" Grid.Row="1" ItemsSource="{Binding Packages}" Background="Transparent" Margin="20" Padding="20">
                       <ListBox.Styles>
                           <Style Selector="ListBoxItem">
                               <Setter Property="Padding" Value="0,0,0,15"/>
                               <Setter Property="Background" Value="Transparent"/>
                           </Style>
                           <Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
                               <Setter Property="Background" Value="Transparent"/>
                           </Style>
                       </ListBox.Styles>
                       <ListBox.ItemTemplate>
                           <DataTemplate>
                               <Border Background="#222222" CornerRadius="10" Padding="20,15" BorderBrush="#2D2D2D" BorderThickness="1">
                                   <Grid ColumnDefinitions="*,120,Auto">
                                       <StackPanel Spacing="2">
                                           <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="15" Foreground="White"/>
                                           <TextBlock Text="Standard Unity Package" FontSize="11" Foreground="{StaticResource MetaSubtext}"/>
                                       </StackPanel>
                                       
                                       <TextBlock Grid.Column="1" Text="{Binding Version}" Foreground="{StaticResource MetaAccent}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                       
                                       <Button Grid.Column="2" Content="✕" FontSize="12" Padding="12,8" Background="Transparent" Foreground="#666666"/>
                                   </Grid>
                               </Border>
                           </DataTemplate>
                       </ListBox.ItemTemplate>
                   </ListBox>
               </Grid>
           </Border>
       </Grid>
    </Grid>
</Window>
